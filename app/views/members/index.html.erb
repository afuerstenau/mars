<h1><%= t('.list_members') %></h1>

<%= search_form_for @search do |f| %>
<div class="field">
	<%= f.label :payment_method_matches, t("payment_method") %>
	<%= f.select :payment_method_matches, Member::PAYMENT_METHODS.map { |p| [t(p), p] } %>
</div>
<div class="actions"><%= f.submit "Search"%></div>
<% end %>

<%= link_to t('new'), new_member_path %>
<table>
  <tr>
    <th><%= t('last_name') %></th>
	<th><%= t('first_name') %></th>
    <th><%= t('street') %></th>
	<th><%= t('place') %></th>
    <th><%= t('phone') %></th>
    <th><%= t('email') %></th>
    <th><%= t('membership_fee') %></th>
	<th><%= t('payment_method') %></th>
	<th><%= t('enrolement_date') %></th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

<% @members.each do |member| %>
  <tr class="<%= cycle( 'list_line_odd', 'list_line_even')%>">
    <td><%= member.last_name %></td>
	<td><%= member.first_name %></td>
    <td><%= member.street %></td>
	<td><%= member.postcode %> <%= member.town %></td>
    <td><%= member.phone %></td>
    <td><%= member.email %></td>
    <td><%= number_to_currency(member.beitrag) %></td>
	<td><%= (t member.payment_method) if !member.payment_method.nil? && !member.payment_method.empty? %></td>
	<td><%= (l member.eintrittsdatum) if !member.eintrittsdatum.nil? %></td>
    <td class="list_actions">
		<%= link_to t('show'), member %>
    <%= link_to t('edit'), edit_member_path(member) %>
    <%= link_to t('delete'), member, method: :delete, data: { confirm: 'Are you sure?' } %>
	</td>
  </tr>
<% end %>
</table>

<br />
